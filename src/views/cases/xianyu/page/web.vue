<template>
    <div class="wrapper">

        <div class="toolbar">
            <div class="left">
                <text class="btnTxt xyIconFont"  @click="back">&#xe606;</text>
                <text class="btnTxt xyIconFont"  @click="close">&#xe68b;</text>
            </div>
            <text class="tlt"></text>
            <div class="right">
                <text class="btnTxt xyIconFont" @click="reload">&#xe601;</text>
            </div>
        </div>
        <div class="webview-box">
        <web ref="wv" class="webview" :src="url" @error="error"></web>
        </div>
    </div>
</template>
<script>
  import util from '../assets/util'
  const navigator = weex.requireModule('navigator')
  const webview = weex.requireModule('webview')
  const modal = weex.requireModule('modal')
  export default {
    components: {
    },
    data () {
      return {
        url0: 'http://m.you.163.com'
      }
    },
    created (_e) {
      util.initIconFont()
      this.url = util.getUrlSearch(weex.config.bundleUrl, 'weburl') || this.url0
      console.log('webPageURL', this.url)
      //            modal.toast({ message: this.url });
    },
    methods: {
      back (event) {
        modal.toast({ message: 'back' })
        webview.goBack(this.$refs.wv)
      },
      close (event) {
        navigator.pop({
          animated: 'false'
        })
      },
      reload (event) {
        modal.toast({ message: 'reload' })
        webview.reload(this.$refs.wv)
      },
      error (event) {
        console.log('error', event)
        //                modal.toast({ message: 'error' })
      }
    }
  }
</script>
<style scoped>
    .wrapper{
        position: absolute;
        left: 0;
        right:0;
        bottom: 0;
        top:0;
    }
    .xyIconFont {
        font-family:xyIconFont;
    }

    .toolbar{
        position: fixed;
        top: 0;
        left: 0;right: 0;
        height: 114px;
        padding-top: 44px;
        background-color: #fafafa;
        opacity: .99;
        z-index: 101;
        flex-wrap: nowrap;
        flex-direction: row;
        justify-content: space-around;
        border-bottom-width: 1px;
        border-bottom-color: #d9d9d9;
    }
    .tlt{
        flex: 1;
        font-size: 36px;
        padding-top: 10px;
        color:#333;
        text-align: center;
    }
    .left,.right{
        height: 68px;
        width: 150px;
        padding-top:10px;
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        justify-content: center;
    }
    .left{
        justify-content: flex-start;
        padding-left: 20px;
    }
    .right{
        justify-content: flex-end;
        padding-right: 20px;
    }
    .btnTxt{
        font-size: 40px;
        width: 70px;
        color:#666;

        text-align: center;
    }
    .webview-box {
        position: absolute;
        top: 114px ;
        left: 0;
        right:0;
        bottom: 0;
    }
    .webview{
        position: absolute;
        top: 0 ;
        left: 0;
        right:0;
        bottom: 0;
    }

</style>
